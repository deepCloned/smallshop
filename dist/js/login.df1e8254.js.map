{"version":3,"sources":["webpack:///./src/views/Login.vue?2cb1","webpack:///./src/views/Login.vue?4160","webpack:///src/views/Login.vue","webpack:///./src/views/Login.vue?5da6","webpack:///./src/views/Login.vue","webpack:///./src/model/validator.js","webpack:///./src/assets/logo.png"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_m","attrs","usernameError","model","value","callback","$$v","username","expression","passwordError","password","loading","on","handleSubmit","_v","staticRenderFns","name","data","methods","validate","canSubmit","component","Validator","usernameReg","emailReg","passwordReg","usernameNotNull","usernameNotLegal","passwordNotNull","passwordNotLegal","test","module","exports"],"mappings":"yGAAA,yBAA+hB,EAAG,G,gECAliB,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,UAAU,CAACE,YAAY,SAAS,CAACN,EAAIO,GAAG,GAAGH,EAAG,MAAM,CAACE,YAAY,aAAa,CAACF,EAAG,iBAAiB,CAACA,EAAG,YAAY,CAACI,MAAM,CAAC,MAAQ,MAAM,YAAc,SAAS,SAAW,GAAG,gBAAgBR,EAAIS,eAAeC,MAAM,CAACC,MAAOX,EAAY,SAAEY,SAAS,SAAUC,GAAMb,EAAIc,SAASD,GAAKE,WAAW,cAAcX,EAAG,YAAY,CAACI,MAAM,CAAC,KAAO,WAAW,MAAQ,KAAK,YAAc,QAAQ,SAAW,GAAG,gBAAgBR,EAAIgB,eAAeN,MAAM,CAACC,MAAOX,EAAY,SAAEY,SAAS,SAAUC,GAAMb,EAAIiB,SAASJ,GAAKE,WAAW,eAAe,GAAGX,EAAG,aAAa,CAACE,YAAY,SAASE,MAAM,CAAC,QAAUR,EAAIkB,QAAQ,KAAO,UAAU,KAAO,QAAQ,eAAe,UAAUC,GAAG,CAAC,MAAQnB,EAAIoB,eAAe,CAACpB,EAAIqB,GAAG,sBAAsBjB,EAAG,cAAc,CAACE,YAAY,cAAcE,MAAM,CAAC,GAAK,YAAY,IAAM,QAAQ,CAACR,EAAIqB,GAAG,gBAAgB,MACp5BC,EAAkB,CAAC,WAAa,IAAItB,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,QAAQ,CAACF,EAAG,MAAM,CAACE,YAAY,YAAY,CAACF,EAAG,MAAM,CAACI,MAAM,CAAC,IAAM,EAAQ,QAAsB,IAAM,YAAYJ,EAAG,IAAI,CAACE,YAAY,SAAS,CAACN,EAAIqB,GAAG,a,wBC4CxR,aACA,aAEA,GACEE,KAAM,QACNC,KAFF,WAGI,MAAO,CACLV,SAAU,GACVG,SAAU,GACVR,cAAe,GACfO,cAAe,GACfE,SAAS,IAGbO,QAAS,CACPL,aADJ,WACA,WACMnB,KAAKyB,WACAzB,KAAK0B,YAGV1B,KAAKiB,SAAU,EACf,EAAN,sCACA,kBACQ,EAAR,WACQ,EAAR,eACQ,EAAR,cAAU,KAAV,SAEQ,aAAR,yBACQ,aAAR,kCAEA,kBACQ,EAAR,gBAIIQ,SArBJ,WAsBMzB,KAAKQ,cAAgB,EAA3B,gCACMR,KAAKe,cAAgB,EAA3B,gCACWf,KAAKQ,eAAkBR,KAAKe,gBAC/Bf,KAAK0B,WAAY,MCpFsT,I,wBCQ3UC,EAAY,eACd,EACA7B,EACAuB,GACA,EACA,KACA,WACA,MAIa,aAAAM,E,uECnBTC,E,WACJ,aAAe,uBAQb5B,KAAK6B,YAAc,oCACnB7B,KAAK8B,SAAW,qDAChB9B,KAAK+B,YAAc,qEAMnB/B,KAAKgC,gBAAkB,UACvBhC,KAAKiC,iBAAmB,cACxBjC,KAAKkC,gBAAkB,SACvBlC,KAAKmC,iBAAmB,yB,gEAMRtB,GAChB,OAAKA,EAGAb,KAAK6B,YAAYO,KAAKvB,GAGpB,GAFEb,KAAKiC,iBAHLjC,KAAKgC,kB,uCAWEhB,GAChB,OAAKA,EAGAhB,KAAK+B,YAAYK,KAAKpB,GAGpB,GAFEhB,KAAKmC,iBAHLnC,KAAKkC,oB,KASHN,U,mBClDfS,EAAOC,QAAU","file":"js/login.df1e8254.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=style&index=0&id=0814ee47&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=style&index=0&id=0814ee47&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"login\"},[_vm._m(0),_c('div',{staticClass:\"login-box\"},[_c('van-cell-group',[_c('van-field',{attrs:{\"label\":\"用户名\",\"placeholder\":\"请输入用户名\",\"required\":\"\",\"error-message\":_vm.usernameError},model:{value:(_vm.username),callback:function ($$v) {_vm.username=$$v},expression:\"username\"}}),_c('van-field',{attrs:{\"type\":\"password\",\"label\":\"密码\",\"placeholder\":\"请输入密码\",\"required\":\"\",\"error-message\":_vm.passwordError},model:{value:(_vm.password),callback:function ($$v) {_vm.password=$$v},expression:\"password\"}})],1),_c('van-button',{staticClass:\"submit\",attrs:{\"loading\":_vm.loading,\"type\":\"primary\",\"size\":\"large\",\"loading-text\":\"登录中...\"},on:{\"click\":_vm.handleSubmit}},[_vm._v(\"\\n      登录\\n    \")]),_c('router-link',{staticClass:\"go-register\",attrs:{\"to\":\"/register\",\"tag\":\"div\"}},[_vm._v(\"没有账号？立即注册\")])],1)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"logo\"},[_c('div',{staticClass:\"logo-img\"},[_c('img',{attrs:{\"src\":require(\"../assets/logo.png\"),\"alt\":\"logo\"}})]),_c('p',{staticClass:\"title\"},[_vm._v(\"小商铺\")])])}]\n\nexport { render, staticRenderFns }","<template>\r\n  <section class=\"login\">\r\n    <div class=\"logo\">\r\n      <div class=\"logo-img\">\r\n        <img src=\"../assets/logo.png\" alt=\"logo\" />\r\n      </div>\r\n      <p class=\"title\">小商铺</p>\r\n    </div>\r\n\r\n    <div class=\"login-box\">\r\n      <van-cell-group>\r\n        <van-field\r\n          label=\"用户名\"\r\n          v-model=\"username\"\r\n          placeholder=\"请输入用户名\"\r\n          required\r\n          :error-message=\"usernameError\"\r\n        />\r\n        <van-field\r\n          type=\"password\"\r\n          label=\"密码\"\r\n          v-model=\"password\"\r\n          placeholder=\"请输入密码\"\r\n          required\r\n          :error-message=\"passwordError\"\r\n        />\r\n      </van-cell-group>\r\n      <van-button\r\n        @click=\"handleSubmit\"\r\n        :loading=\"loading\" \r\n        class=\"submit\"\r\n        type=\"primary\"\r\n        size=\"large\"\r\n        loading-text=\"登录中...\"\r\n      >\r\n        登录\r\n      </van-button>\r\n      <router-link class=\"go-register\" to=\"/register\" tag=\"div\">没有账号？立即注册</router-link>\r\n    </div>\r\n  </section>\r\n</template>\r\n\r\n<script>\r\nimport Login from '../model/login'\r\nimport Validator from '../model/validator'\r\nconst login = new Login()\r\nconst validator = new Validator()\r\n\r\nexport default {\r\n  name: 'login',\r\n  data () {\r\n    return {\r\n      username: '',\r\n      password: '',\r\n      usernameError: '',\r\n      passwordError: '',\r\n      loading: false\r\n    }\r\n  },\r\n  methods: {\r\n    handleSubmit () {\r\n      this.validate()\r\n      if (!this.canSubmit) {\r\n        return\r\n      }\r\n      this.loading = true\r\n      login.getLogin(this.username, this.password)\r\n        .then((res) => {\r\n          this.loading = false\r\n          this.$toast('登录成功')\r\n          this.$router.push({ name: 'home' })\r\n          // 把用户名和token写入缓存\r\n          localStorage.setItem('token', res.token)\r\n          localStorage.setItem('username', res.username)\r\n        })\r\n        .catch(() => {\r\n          this.loading = false\r\n        })\r\n    },\r\n    // 验证参数\r\n    validate () {\r\n      this.usernameError = validator.validateUsername(this.username)\r\n      this.passwordError = validator.validatePassword(this.password)\r\n      if (!this.usernameError && !this.passwordError) {\r\n        this.canSubmit = true\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import '../assets/styles/common.scss';\r\n  .login{\r\n    .logo{\r\n      @include flex(column);\r\n      justify-content: center;\r\n      align-items: center;\r\n      width: 100%;\r\n      height: 200px;\r\n      position: relative;\r\n      &:after{\r\n        @include after(100%);\r\n        top: 200px;\r\n        left: 0;\r\n      }\r\n      .logo-img{\r\n        width: 60px;\r\n        height: 60px;\r\n        img{\r\n          width: 100%;\r\n          height: 100%;\r\n          border-radius: 50%;\r\n        }\r\n      }\r\n      .title{\r\n        color: #666;\r\n        margin-top: 10px;\r\n      }\r\n    }\r\n    .login-box{\r\n      .submit{\r\n        width: 345px;\r\n        height: 40px;\r\n        background-color: #ab956d;\r\n        border-radius: 40px;\r\n        line-height: 40px;\r\n        margin-top: 50px;\r\n        margin-left: 15px;\r\n      }\r\n      .go-register{\r\n        width: 100%;\r\n        height: 20px;\r\n        margin-top: 10px;\r\n        text-align: center;\r\n        line-height: 20px;\r\n        color: #666;\r\n        font-size: 14px;\r\n      }\r\n    }\r\n  }\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Login.vue?vue&type=template&id=0814ee47&scoped=true&\"\nimport script from \"./Login.vue?vue&type=script&lang=js&\"\nexport * from \"./Login.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Login.vue?vue&type=style&index=0&id=0814ee47&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0814ee47\",\n  null\n  \n)\n\nexport default component.exports","class Validator {\r\n  constructor () {\r\n    /**\r\n     * 定义验证用户登录合法性规则\r\n     * 用户名\r\n     * 邮箱\r\n     * 密码\r\n     * 验证码\r\n     */\r\n    this.usernameReg = /[A-Za-z0-9_\\-\\u4e00-\\u9fa5]{6,32}/\r\n    this.emailReg = /^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\\.[a-zA-Z0-9_-]+)+$/\r\n    this.passwordReg = /(?!^[0-9]+$)(?!^[A-z]+$)(?!^[^A-z0-9]+$)^[^\\s\\u4e00-\\u9fa5]{8,16}$/\r\n    // ^(?![0-9]+$)(?![a-zA-Z]+$)[0-9a-zA-Z]\r\n\r\n    /**\r\n     * 定义错误消息\r\n     */\r\n    this.usernameNotNull = '用户名不能为空'\r\n    this.usernameNotLegal = '用户名不得少于6个字符'\r\n    this.passwordNotNull = '密码不能为空'\r\n    this.passwordNotLegal = '密码包含数字、字母、符号中的两种，不少于8位'\r\n  }\r\n  \r\n  /**\r\n   * 目的：检测所传用户名，返回错误信息，如果没有错误，直接返回空字符串\r\n   */\r\n  validateUsername (username) {\r\n    if (!username) {\r\n      return this.usernameNotNull\r\n    }\r\n    if (!this.usernameReg.test(username)) {\r\n      return this.usernameNotLegal\r\n    }\r\n    return ''\r\n  }\r\n\r\n  /**\r\n   * 检测用户名的合法性\r\n   */\r\n  validatePassword (password) {\r\n    if (!password) {\r\n      return this.passwordNotNull\r\n    }\r\n    if (!this.passwordReg.test(password)) {\r\n      return this.passwordNotLegal\r\n    }\r\n    return ''\r\n  }\r\n}\r\n\r\nexport default Validator\r\n","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAV4AAAFeCAMAAAD69YcoAAAAk1BMVEXKq3MCAwXmPjTpPzOnjl9QQy3jQjWAbEjgSDjLpW/KqHHdUD3iRTccGBDbVkDKpG/CpG6wlWTMnmvOkWOVfVUwKRy5nWnNlmZqWTzUb07Pil/Tg1vYW0PKoW3Lm2nReVTRdFHMl2fPhFvNjmHdTTvUaEqfhlrPf1jWdVJ1Y0JBNyVdTjTWYkeLdU7cX0XUfFbaZknnXLnXAAAJZklEQVR42uzBgQAAAACAoP2pF6kCAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABmDw4EAAAAAID8XxtBVVVVVVVVVVVVVVVVVVWFHbvrTRCGwgB8OHPYpq5RmB/QfZgMDXEJ8v9/3VgRsy2ryamWSDjPnRftxevhbVPGGGOMMcYYY4wxxn6Real1DSwIg5YEFkKJlgEWQopWBSwEiVe1Q6kF6iwB5qDQMletXgP7X42W8px9PhkvM9hKwEOOVgzMIcHWETxkaGlgLgItdUX1lsBcMmyt/as3B+aSYyvz722+mF2A3udThZYA5lZ5f+LYqqF/q0ljDgNgsFX51oqB/kXf9jAAEj0rtCKtCxDvFIagi6n0+1sU9G81oHgNtoTfsgz6NxlQvBK9SlSRLszjjffcDhoI1qSZH3O8uc/hVtO6IUS8GxgGQb/BSqR1Q4h4H2EYSiQ/3JbEbhhzvAlS72Yypj1kjjpeqKgPD4Y473cY72LSWPzduLWAm0rxxIRp6zuMN7IOP/acPj5FZ8vP6Q0zVrQqPeJJCmTh45Xp9qUQcWMmdJa/OuK1ug03NtrOrbvHkMZXxsSbcp/xJu9axPjQiWdql7rjnUPj+RBZweIFQRnfkjy8vcX7ttVxEyrORKGUKmb2R7H7cMU7AdgvIytkvEfC+Cbk4e0r3i/2zXVLTRgKo59EuYSbXAS1gIKiddS27/90JXGCI5OInbZMu5b7T4dK6WJz5lwSpMtMI0TfZov9Ji2KMqrWJ9tpDG9XOW55dRonk5GCOf4clv54+P743OBV6/X3jUrNvqgM9yE4VaYTotU+bni1+uK+9/pq/ow/yNeHwzfSeoM32BmcXaDYaLjtkGLDiO/tPUzHZ+PmFEOud9V43O5zmi8j0IW2BlDuI+pvMkLIyerq7eIejbYlm4rNkMHD11YFr6wKu/OdLPBa18b1Nl9iyNjNZ9dTDskdvXu9kRhZwEK388b1HkCt2wCKRrx2uqv35Rzgb9KG7/cHz/shl/suLGbxe70BGPGkc+YOXeJZt+AEKr0bk2h1COaUmD78jQ/gRLYX9Q7R1kq97lzq9q+Er271DdDq06YHaQ2edvWOAQST3nIyldUdQ64391iA0nTpY3NaA35JmfO6Ai0oD22nlOt1jSn+Pl8fWnmw7wX59GUkxQ3e6437y3XgSh+WTC9PvB5FkTlLcDbbFOIn9lcLQjKKluNIMIhcwDIfWPf92q1rch0vTSFqKtak61fojfn9CWaTawo4oGV6tfsymbTnzOV6PeLsWfNQF+AUi7B9EelEgdQmeokWQzysBAPxRevdk0/b1BDeid1jK3NquK9+pt2NhrOoVmN+YptkxxBMhIF4KpYF2P+QSPWmJvF8AH6OCzSnYMcU4aJkx2uefbt6pxgMs6+htUx1amjj0d3dOD+KqOzonTY+3UOAlsPtsCSyh3vGG5Kzga5ekRuYvBCCfL33gXyVUpEjdOK91zvGYERaT3P2415qGHfygGA+4iQdvQiOIipv71j8+5n8cpDrzYhewV9llQVYIQVdak4ElHbF9BbLAqVHzE/VC+9+dft+LzVgItchPM37t8lmb+N8N+LEeEhv6hBzg8ImWQ4anQrQStcjgJY+GmpzgTAjTicY+PWHI9QEqSLxqt9HS5SjZHzx3p1nVSfO3gb9BI/pzQjTm9f62gLdZAXgr5Y+BCbJkEv1GhiE/sbA0u8OFGfhRhWV41690xEHnEtN3D2mt9QJcSrQMMoBWAW9FDValBSMVbZH4RFzaL2P1y6r7XhtC8rccABDmn0NiV71c0iE6of0rjVy6Qv86lVozv7Ma7sEwy99RA6xO79sg+/mL9v0mkrKmvhEhqusFNO3eqfCjPoRjVWPQa3XIzohmcWGsyzkPldeCdAystgBTxMrQha40g4pg/KtjVGpXfWS2ohzXXAaG4Zx5MPA7Y2IHNKj96z+ZQDOXTMm8bYsO2Bp1jkaaLr3Iaj0Cqzs6emn671m2K/SpoEnXnVlM/h4JUXo5fTqNVSZURraDqnXDvEAfxOCQy92w4Iv9iwvQ7FkPX2GYVlqgkgy0Gk2VHfcx+Gv6j2xJZ0aDLpaMKmULzdsN4AV+agc4kSyJTMMTJsedOu9Xd36oN7ZMejTK/J38ut62UQcOURfgAertoZV1QVQaaQCozJZ8P4Leq/p4dt7uykUTBVa3clkLjYaevWOOP0dxlhS2iKsdaLXEZDazgolc4z0dCr57nFjV1/hLWLpNMEAyNPD99Zu/+6asMmYGw2Kt11GnN6+N7hcrl+vaMzWlC50QryqwKayQJftilkYndjGvJkCkE3FQ7O4dgli1BCHaiYPFmIRM0prs/6xYiwZK+wUlG22aV7l4wr1o9ohDA83xJ+mF/ZVaPjtMbs4jGQ+1KODhPittaM4eEQvzXhT62+8xqNunlabwqKU5um+tnWNEEcn+kpeLHYYnFDXWqR21Z2Zm0DQ0x2opoX5TXSdH9KL0iF86zJd2xoz/PoayeV9ne3CJsTLcUPQTsXDs3zErnzhcRZ8WO/x5n5n0iWtRKqXZ1+H+UW09kydtGiOt65qvp7W4dP08oTbQY/QQ+LKdwan5+RBvS8jxq6THOcJWuLjaCfXi5NG9FUBgFW1zDadBnOb1VUeLjQW2v+SXnzr2E3RS9w2Y4edMBycj40glV511RNnco5n1tiNz0eXXVyh1zoRQrLIp+D4RZmWOV/k2Yqm7JbJkFOxcoFMvUim9is6tJmktzwo9IpsOOvbd94BiUyMX2uNx+ymb0C+slll2/uSVDSwXnV5+2bhIWJ3JCXGFUOpdycq232/BwDtD7cqt6RRuT2tq6gMi3KzX2QsDWvZksoK6afqRSpZ3OkjOX5Yr/hk1/NWyiRQf6d4U28vfcOlbXD4gbcuICMeUq/arxnhFwjm3Qh2eW1qGSv1TiRzWjKXvlHlqopSVNuOTgSabnqrEHLGn6wXKcu/Cwu/yO7w5r28+U7aHwfSd/9mkt2DqbiceCdCPAk3hox8ufBMR29wttk6sqDks/XC+v49xMcYMwLVRx/5Hk9ye5zgd3kZ/Vdf3/rfODe9jWEEePLkyZMnT548efLkyZMnP9mDAwEAAAAAIP/XRlBVVVVVVVVVVVVVVVVVVWEPDgQAAAAAgPxfG0FVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVdkoGAWjgC4AAAt0iWNyyTUrAAAAAElFTkSuQmCC\""],"sourceRoot":""}